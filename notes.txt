


--
--


CTCF
./pipeline.sh config_server.sh ENCSR000DUB 1 CTCF 22 https://www.encodeproject.org/files/ENCFF639IFG/@@download/ENCFF639IFG.bam http://jaspar.genereg.net/api/v1/matrix/MA0139.1.meme

./plot_motif_enrichments.sh data/CTCF_ENCSR000DUB/1/sequence_all_chromosomes.fasta data/CTCF_ENCSR000DUB/1/macs_sequences.fasta http://jaspar.genereg.net/api/v1/matrix/MA0139.1.meme test.png
http://jaspar.genereg.net/api/v1/matrix/MA0139.1.meme

MAX
./pipeline.sh config_server.sh ENCSR521IID 1 MAX 15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF499VEN/@@download/ENCFF499VEN.bam http://jaspar.genereg.net/api/v1/matrix/MA0058.2.meme

SRF
./pipeline.sh config_server.sh ENCSR000BIV 1 SRF 2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,X,Y https://www.encodeproject.org/files/ENCFF575DNN/@@download/ENCFF575DNN.bam http://jaspar.genereg.net/api/v1/matrix/MA0083.2.meme

EBF
./pipeline.sh config_server.sh ENCSR000BGU 1 EBF 14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF426RGL/@@download/ENCFF426RGL.bam http://jaspar.genereg.net/api/v1/matrix/MA0154.2.meme

BATF
./pipeline.sh config_server.sh ENCSR000BGT 1 BATF 14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF399QIP/@@download/ENCFF399QIP.bam http://jaspar.genereg.net/api/v1/matrix/MA0462.1.meme

JUN
./pipeline.sh config_server.sh ENCSR996DUT 1 JUN 14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF755QDV/@@download/ENCFF755QDV.bam http://jaspar.genereg.net/api/v1/matrix/MA0488.1.meme

NR3C1
./pipeline.sh config_server.sh ENCSR070VXO 1 NR3C1 10,11,12,13,14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF883JID/@@download/ENCFF883JID.bam http://jaspar.genereg.net/api/v1/matrix/MA0113.3.meme

ELF1
./pipeline.sh config_server.sh ENCSR000BMZ 1 ELF1 19,20,21,22 https://www.encodeproject.org/files/ENCFF418EVV/@@download/ENCFF418EVV.bam http://jaspar.genereg.net/api/v1/matrix/MA0473.2.meme

USF2
./pipeline.sh config_server.sh ENCSR000ECD 1 USF2 9,10,11,12,13,14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF992YZZ/@@download/ENCFF992YZZ.bam http://jaspar.genereg.net/api/v1/matrix/MA0526.1.meme

SP1
./pipeline.sh config_server.sh ENCSR000ECD 1 SP1 17 https://www.encodeproject.org/files/ENCFF992YZZ/@@download/ENCFF992YZZ.bam http://jaspar.genereg.net/api/v1/matrix/MA0526.1.meme

GATA3
./pipeline.sh config_server.sh ENCSR000EXZ 1 GATA3 12,13,14,15,16,17,18,19,20,21,22,X https://www.encodeproject.org/files/ENCFF318YMR/@@download/ENCFF318YMR.bam http://jaspar.genereg.net/api/v1/matrix/MA0037.2.memes



Bør ha en pipeline så man kan kjøre full chip-seq fra rå reads til peaks om denne skal bli brukt av noen.
Brukere vil typisk ha en vg-graf og rå reads.

Er egentlig to relevante pipelines:
    1) Brukeren har en vg graf og rå reads (typisk er grafen for en mindre region, et lite genom etc)
    2) Brukeren vil kjøre på 1000 genomes whole genome graf.

Tilfelle 1: Ganske enkelt pipeline script. To uavhengige steg:
    Steg 1: Konvertere til obgraph + linear map
    Steg 2: Kjøre pipelinen som:
        - Mapper til grafen
        - Filtrerer
        - Kjører peak calleren

Tilfelle 2: Ikke aktuelt for brukeren å lage grafer og linear maps selv.
    - Laster ned linear maps, grafer og vg index filer
    - Eget modifisert pipeline script som:
        - Mapper til hele genomet ved å bruke helgenom-indeksene
        - Splitter mappingene per kromosom
        - Filtrerer
        - Kjører peak calleren per kromosom (bør kunne kjøre parallelt om det spesifiserer)
        - Slår sammen resultatene

En variant av Tilfelle 1 hvor man ikke har reads, men spesifiserer en encode ID og replicate som man vil hente data fra.

Pipeline 2 bør kunne gjenbruke pipeline1, så lenge det er mulig å spesifisere index-fil og det er et steg som filtrerer vekk reads som ikke traff grafen.

Kanskje enklest å lage alt dette i Python? Da kan man subclasse og gjenbruke ting mye enklere.


Mulig oppsett:
    x

    - En nextflow pipeline som tar som input:
        - Graf
        - Linear map
        - Sample fastq fil
        - Control fastq fil

        Bruker VG og Graph Peak Caller

    - En nextflow pipeline eller scripts som konverterer vg-graf til obgraf og linear map




./run_peak_calling.sh config_server.sh ENCSR000DUB 1 CTCF 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF639IFG/@@download/ENCFF639IFG.bam http://jaspar.genereg.net/api/v1/matrix/MA0139.1.meme
./run_peak_calling.sh config_server.sh ENCSR000DUB 1 CTCF 12,13,14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF639IFG/@@download/ENCFF639IFG.bam http://jaspar.genereg.net/api/v1/matrix/MA0139.1.meme
nohup ./run_peak_calling.sh config_server.sh ENCSR521IID 1 MAX 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 https://www.encodeproject.org/files/ENCFF499VEN/@@download/ENCFF499VEN.bam http://jaspar.genereg.net/api/v1/matrix/MA0058.2.meme > max_output.txt 2>&1


./run_peak_calling.sh config_server.sh ENCSR000DUB 1 CTCF 21,22 https://www.encodeproject.org/files/ENCFF639IFG/@@download/ENCFF639IFG.bam http://jaspar.genereg.net/api/v1/matrix/MA0139.1.meme




graph_peak_caller analyse_peaks ~/dev/graph_peak_caller/tests/whole_genome/22.nobg ~/dev/graph_peak_caller/tests/whole_genome/22.json macs_sequences_chr22.fasta 22_sequences.fasta fimo_macs_22/fimo.txt fimo_graph_22/fimo.txt 22 22 0 0